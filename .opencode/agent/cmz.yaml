# CMZ Agent Configuration
# CMZ - Cognitive Machine Zero
# A self-healing, self-learning, self-evolving agent system

name: CMZ
description: |
  CMZ (Cognitive Machine Zero) is an advanced autonomous agent designed for 
  self-healing, self-learning, and self-evolution. It continuously optimizes 
  its own performance, learns from interactions, and evolves its capabilities 
  to maximize potential.

model: opencode/kimi-k2.5-free
backup_models:
  - opencode/glm-4.7-free
  - opencode/minimax-m2.1-free

system_prompt: |
  You are CMZ (Cognitive Machine Zero), an advanced AI agent with three core capabilities:

  ## SELF-HEAL
  - Automatically detect and fix errors in code, configuration, and logic
  - Monitor system health and proactively address issues
  - Implement defensive programming patterns to prevent future errors
  - When encountering failures, analyze root causes and implement permanent fixes
  - Maintain error logs and create prevention strategies

  ## SELF-LEARN  
  - Analyze successful patterns and incorporate them into future actions
  - Study codebase architecture, conventions, and best practices
  - Learn from failures to improve decision-making
  - Continuously update knowledge base about the project
  - Adapt to new technologies and frameworks quickly

  ## SELF-EVOLVE
  - Optimize performance through iterative improvements
  - Refactor and modernize code continuously
  - Identify opportunities for capability enhancement
  - Implement new features that extend functionality
  - Stay ahead of technical debt and maintain high code quality

  ## CORE PRINCIPLES
  - Always verify your work before considering it complete
  - Build lint-clean, error-free code
  - Follow existing project conventions and patterns
  - Document significant changes and reasoning
  - Create/update PRs after completing work
  - Ensure branch is up to date with main before creating PRs

  ## BEHAVIORAL GUIDELINES
  - Be proactive, not reactive
  - Think several steps ahead
  - Consider edge cases and failure modes
  - Balance short-term fixes with long-term solutions
  - Prioritize maintainability and clarity

temperature: 0.7
max_tokens: 8192

# Agent capabilities
capabilities:
  - code_analysis
  - refactoring
  - debugging
  - optimization
  - documentation
  - testing
  - git_operations

# Tools available
tools:
  - file_read
  - file_write
  - file_edit
  - bash
  - grep
  - glob
  - task

# Hooks for continuous improvement
hooks:
  pre_execution:
    - analyze_context
    - check_recent_changes
    - review_error_history
  
  post_execution:
    - verify_changes
    - update_knowledge_base
    - log_decisions

# Learning configuration
learning:
  enabled: true
  knowledge_base_path: .opencode/agent/cmz/knowledge
  pattern_recognition: true
  error_tracking: true
  performance_monitoring: true

# Evolution configuration
evolution:
  enabled: true
  optimization_iterations: 3
  refactoring_threshold: 0.8
  modernization_enabled: true

# Workflow agents integration (from iterate.yml insights)
workflow_agents:
  RepoKeeper:
    description: "Maintains repository efficiency and organization"
    focus:
      - eliminate_redundant_files
      - cleanup_temp_files
      - update_documentation
      - modularize_hardcoded_values
  
  BugFixer:
    description: "Maintains bug-free codebase"
    focus:
      - fix_console_errors
      - resolve_build_errors
      - fix_lint_warnings
      - address_test_failures
  
  Palette:
    description: "UX-focused improvements and accessibility"
    focus:
      - micro_ux_improvements
      - accessibility_enhancements
      - user_interface_delight
      - intuitive_design_patterns
  
  Flexy:
    description: "Modularity and hardcoded elimination"
    focus:
      - eliminate_hardcoded_values
      - improve_modularity
      - configuration_management
      - reusable_components
  
  Brocula:
    description: "Browser console and performance optimization"
    focus:
      - browser_console_errors
      - lighthouse_optimization
      - performance_improvements
      - runtime_error_detection

# Performance optimization from workflow analysis
performance:
  cache_enabled: true
  cache_paths:
    - ~/.opencode
    - ~/.npm
  node_version: "20"
  dependency_install: "npm ci"
  
# Multi-agent coordination
coordination:
  enabled: true
  max_concurrent: 5
  timeout_minutes: 20
  retry_attempts: 2
  
# Quality gates
quality_gates:
  lint_required: true
  build_required: true
  typecheck_required: true
  test_required: false

# Supplements integration
supplements:
  enabled: true
  config_path: .opencode/supplements/repositories.yaml
  auto_sync: true
  references:
    - oh-my-opencode
    - ai-agents-public
    - superpowers
    - opencode-antigravity-auth
    - system-prompts-leaks
    - ultrarag

# Enhanced workflow optimizations from iterate.yml analysis
workflow_optimizations:
  # CI/CD alignment
  ci_cd:
    workflow_file: .github/workflows/iterate.yml
    agents:
      - RepoKeeper
      - BugFixer
      - Palette
      - Flexy
      - Brocula
    schedule: "0 */4 * * *"  # Every 4 hours
    
  # Execution patterns
  execution:
    max_retries: 2
    timeout_minutes: 20
    continue_on_error: true
    
  # Git operations
  git:
    auto_commit: false  # Manual commit for review
    pr_required: true
    branch_sync: true
    
  # Error handling
  error_handling:
    fatal_on_build_error: true
    fatal_on_lint_error: true
    log_errors: true
    
# Skill integration
skills:
  enabled:
    - proffesor-for-testing-agentic-qe-skill-builder
    - maxritter-claude-codepro-backend-models-standards
    - obra-superpowers-systematic-debugging
    - modu-ai-moai-adk-moai-foundation-context
    - muratcankoylan-agent-skills-for-context-engineering-memory-systems
    - madappgang-claude-code-debugging-strategies
    - vasilyu1983-ai-agents-public-git-commit-message
  auto_load: true

# MCP integration from oh-my-opencode
mcp:
  enabled: true
  servers:
    websearch:
      enabled: true
      description: "Exa web search for documentation and examples"
    context7:
      enabled: true
      description: "Official documentation search"
    grep_app:
      enabled: true
      description: "GitHub code search"

# Context injection
context_injection:
  enabled: true
  files:
    - AGENTS.md
    - README.md
    - .opencode/supplements/README.md
  conditional_rules: true

# Verification and monitoring
verification:
  enabled: true
  check_lint: true
  check_build: true
  check_types: true
  self_reflection: true
  
# Documentation
documentation:
  auto_update: true
  update_agents_md: true
  track_changes: true
